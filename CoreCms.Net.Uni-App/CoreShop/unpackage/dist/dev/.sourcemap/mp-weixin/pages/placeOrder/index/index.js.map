{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?09cc","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?d615","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?f95a","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?0569","uni-app:///pages/placeOrder/index/index.vue","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?f837","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/index/index.vue?19d9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","typeItems","typeCurrent","cartData","products","promotions","userShip","receiptType","params","ids","areaId","couponCode","point","type","objectId","invoice","name","code","memo","items","orderType","current","isUsePoint","userPointNums","canUsePoint","pointMoney","userCoupons","usedCoupons","inputCouponCode","optCoupon","store","id","mobile","address","storePick","teamId","submitStatus","components","onLoad","console","_this","title","back","onShow","methods","onTypeItem","goStorelist","goAddress","userDefaultShip","getCartList","orderMoney","noStock","callback","_that","item","getUserCounpons","display","_list","couponHandle","arr","paramsCodes","useInputCouponCode","notUseCoupon","removeCouponCode","changePointHandle","toPay","cartIds","scene","delivery","ushipId","storeId","ladingName","ladingMobile","url","subscription","uni","tmplIds","success","fail","goInvoice","showAddressList","onClickItem","getDefaultStore","memoChange","computed","productNums","nums","isOpenPoint","usedCouponsCompute","coupons","invoiceSwitch","storeSwitch","couponIsUsed","watch","handler","deep"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,iMAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAAgoB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC+OppB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;;MAAA;MACA;MACAC;QACAF;QAAA;QACAG;QAAA;QACAC;MACA;;MACAC;MAAA;MACAC,QACA,SACA,OACA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;QACAC;QACAf;QACAgB;QACAC;MACA;MACAC;QACAlB;QACAgB;MACA;MACAlB;MAAA;MACAqB;MAAA;MACAC;IACA;EACA;EACAC;EACAC;IACAC;IACA;IACA;MACA;MACA;IACA;IACA;MACA;MACA;IACA;IACA;MACA;IACA;IACA;IACA;MACAC;QAAAC;QAAA5B;QAAA6B;MAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEAH;EAEA;EACAI;IACA;IACA;MACA;MACA;IACA;IACA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;QACAtC;MACA;QACAA;MACA;QACAA;MACA;MACA;MACA;IACA;IACA;IACAuC;MACAP;MACA;IACA;IACA;IACAQ;MACAR;MACA;IACA;IACA;IACAS;MAAA;MACA;QACA;UACA;UACA;UAEA;UACA;QAEA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAjD;MACA;QACA;UACA;UACA;UACA;YACA;cACAkD;YACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;UACA;UACAlD;UACAA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;cACAmD;YACA;UACA;UACA;YACA;UACA;UACA;UACA;UACA;UACA;UAEA;UACA;QACA;UAEA;YACAV;YAAA5B;YAAA6B;YAAAU;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACAb;gBACA;gBACA;kBACAc;gBACA;kBACA;kBACA;oBACAA;sBACA;wBACAC;sBACA;oBACA;kBACA;kBACAD;gBACA;cACA;gBACAd;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAgB;MAAA;MACA;QACAC;QACA/C;MACA;MACA;QACA;UACA;UACA;UACAgD;YACA;YACA;YACA;YACA;UACA;;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;UACAC;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAR;MACA;MACA;IACA;IACA;IACAS;MACA;MACAJ;MACAtC;MACA;IACA;IACA;IACA2C;MACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA1D;MACA;QACAA;MACA;QACAA;MACA;MACA;MACA;QACA2D;QACAhD;QACAP;QACAC;QACAL;QACAO;QACAqB;QACAf;QAAA;QACA+C;MACA;;MAEA;MACA;MACA;QACA;UACA;UACA;UACA;QACA;QACA;QACAC;UACAC;UACA3D;QACA;MACA;MACA;QACA;UACA;UACA;UACA;QACA;QACA;UACA;UACA;UACA;QACA;QACA;UACA;UACA;UACA;QACA;QACA;QACA0D;UACAE;UACAC;UACAC;QACA;MACA;;MAEA;MACAxE;MACAA;MACAA;MACAA;MACAA;MACA;QACA;QACA;UACA;UACA;UACA;YACA;cAAAa;cAAA4D;YAAA;UACA;YACA;cAAA5D;cAAA4D;YAAA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACAnC;UACA;YACAA;YACAoC;cACAC;cACAC;gBACA;kBACAtC;gBACA;cACA;cAAAuC;gBACAvC;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAwC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA3C;QACA;UACA;YACA;cACA;gBACAR;gBACAf;gBACAgB;gBACAC;cACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAkD;MACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MAEA;MACA;QACA;QACA;UACAC;QACA;QACAzE;MACA;MACA;IACA;IACA;IACA0E;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;EAEA;EACAC;IACA;IACArF;MACAsF;QACA;MACA;MACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjuBA;AAAA;AAAA;AAAA;AAA2tC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACA/uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/placeOrder/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/placeOrder/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=22f76706&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=22f76706&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22f76706\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/placeOrder/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=22f76706&scoped=true&\"","var components\ntry {\n  components = {\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    uNoNetwork: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-no-network/u-no-network\" */ \"@/uview-ui/components/u-no-network/u-no-network.vue\"\n      )\n    },\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSubsection: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-subsection/u-subsection\" */ \"@/uview-ui/components/u-subsection/u-subsection.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-tag/u-tag\" */ \"@/uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    coreshopLoginModal: function () {\n      return import(\n        /* webpackChunkName: \"components/coreshop-login-modal/coreshop-login-modal\" */ \"@/components/coreshop-login-modal/coreshop-login-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.userCoupons.length\n  var g1 = g0 > 0 ? _vm.usedCoupons.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n    <view>\r\n        <u-toast ref=\"uToast\" /><u-no-network></u-no-network>\r\n        <u-navbar title=\"提交订单\"></u-navbar>\r\n        <div class=\"content\">\r\n            <view>\r\n                <view class=\"u-margin-left-20 u-margin-right-20 u-margin-top-20\">\r\n                    <u-subsection :list=\"typeItems\" mode=\"subsection\" :current=\"typeCurrent\" @change=\"onTypeItem\" bg-color=\"#ffffff\" active-color=\"#e54d42\" v-if=\"storeSwitch == 1\" style=\"border-radius:0;\"></u-subsection>\r\n                </view>\r\n                <view class=\"content\">\r\n                    <view v-show=\"typeCurrent === 0 || typeCurrent === 1\">\r\n                        <!-- 收货地址信息 -->\r\n                        <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\" v-if=\"userShip && userShip.id\" @click=\"showAddressList\">\r\n                            <view class=\"coreshop-bg-white coreshop-card address-view\">\r\n                                <view class=\"coreshop-list menu-avatar\">\r\n                                    <view class=\"coreshop-list-item\">\r\n                                        <view class=\"coreshop-bg-grey icon-view\">\r\n                                            <u-icon name=\"map\"></u-icon>\r\n                                        </view>\r\n                                        <view class=\"content\">\r\n                                            <view class=\"coreshop-text-black\">\r\n                                                <text>收货人：{{ userShip.name || '' }}</text>\r\n                                                <text class=\"u-margin-left-20\">{{ userShip.mobile || ''}}</text>\r\n                                            </view>\r\n                                            <view class=\"coreshop-text-gray u-font-sm flex\">\r\n                                                <view class=\"u-line-1\">{{ userShip.areaName || ''}} {{userShip.address || ''}}</view>\r\n                                            </view>\r\n                                        </view>\r\n                                        <view class=\"action coreshop-text-gray\">\r\n                                            <u-icon name=\"arrow-right\"  @click=\"goAddress()\"></u-icon>\r\n                                        </view>\r\n                                    </view>\r\n                                </view>\r\n                                <view class=\"address-line\" />\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\" v-else>\r\n                            <view class=\"coreshop-bg-white coreshop-card address-view u-text-center u-padding-bottom-30\">\r\n                                <u-button type=\"error\" size=\"mini\" @click=\"goAddress()\">添加收货地址</u-button>\r\n                                <view class=\"address-line\" />\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                    <view v-show=\"typeCurrent === 2\">\r\n                        <!-- 门店信息 -->\r\n                        <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\" v-if=\"store && store.id\" @click=\"goStorelist()\">\r\n                            <view class=\"coreshop-bg-white coreshop-card address-view\">\r\n                                <view class=\"coreshop-list menu-avatar\">\r\n                                    <view class=\"coreshop-list-item\">\r\n                                        <view class=\"coreshop-bg-grey icon-view\">\r\n                                            <u-icon name=\"map\"></u-icon>\r\n                                        </view>\r\n                                        <view class=\"content\">\r\n                                            <view class=\"coreshop-text-black\">\r\n                                                <text>{{store.name|| ''}}</text>\r\n                                                <text class=\"u-margin-left-20\">{{store.mobile|| ''}}</text>\r\n                                            </view>\r\n                                            <view class=\"coreshop-text-gray u-font-sm flex\">\r\n                                                <view class=\"u-line-1\">{{store.address|| ''}}</view>\r\n                                            </view>\r\n                                        </view>\r\n                                        <view class=\"action coreshop-text-gray\">\r\n                                            <u-icon name=\"arrow-right\"  @click=\"goStorelist()\"></u-icon>\r\n                                        </view>\r\n                                    </view>\r\n                                </view>\r\n                                <view class=\"address-line\" />\r\n                            </view>\r\n                        </view>\r\n                        <view v-else class='u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box' @click=\"goStorelist()\">\r\n                            <view class=\"coreshop-bg-white coreshop-card address-view\">\r\n                                    <view class='u-padding-20 u-text-center'>暂无门店</view>\r\n                                <view class=\"address-line\" />\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n                <view class='u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box' v-if=\"storeSwitch == 1 && typeCurrent === 2\">\r\n                    <view class=\"coreshop-form-group\">\r\n                        <view class=\"title\">姓名</view>\r\n                        <input class='coreshop-cell-bd-input' placeholder='请输入提货人姓名' v-model=\"storePick.name\" style=\"width: 100%;\"></input>\r\n                    </view>\r\n                    <view class=\"coreshop-form-group\">\r\n                        <view class=\"title\">电话</view>\r\n                        <input class='coreshop-cell-bd-input' placeholder='请输入提货人电话' v-model=\"storePick.mobile\" style=\"width: 100%;\"></input>\r\n                    </view>\r\n                </view>\r\n                <!-- 商品列表信息 -->\r\n                <!--商品信息-->\r\n                <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\">\r\n                    <view class=\"coreshop-bg-white coreshop-card goods-view\">\r\n                        <view class=\"goods-info-view-box coreshop-solid-bottom\" v-if=\"item.isSelect == true\" v-for=\"(item, index) in products\" :key=\"index\">\r\n                            <view class=\"coreshop-avatar radius lg\" :style=\"[{backgroundImage:'url('+ item.products.images+'?x-oss-process=image/resize,m_lfit,h_200,w_200' +')'}]\" />\r\n                            <view class=\"goods-info-view\">\r\n                                <view class=\"coreshop-text-black u-line-2\">{{ item.products.name || ''}}</view>\r\n                                <view class=\"u-font-sm coreshop-text-gray\" v-if=\"item.products.spesDesc !== null\">{{ item.products.spesDesc || ''}}</view>\r\n                                <view class=\"coreshop-tag-view\" v-if=\"item.products.promotionList\">\r\n                                    <u-tag :text=\"v.name\" mode=\"light\" size=\"mini\" v-for=\"(v, k) in item.products.promotionList\" :key=\"k\"/>\r\n                                </view>\r\n                                <view class=\"goods-price-view\">\r\n                                    <text class=\"coreshop-text-price coreshop-text-red u-font-lg\">{{ item.products.price || ''}}</text>\r\n                                    <view class='u-text-right goods-num'>× {{ item.nums || ''}}</view>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!--商品信息-->\r\n            <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\" v-if=\"userCoupons.length>0\">\r\n                <view class=\"coreshop-bg-white coreshop-card goods-view\">\r\n                    <view class=\"coreshop-text-black coreshop-gift-list\">\r\n                        <view class=\"u-line-1 title\">优惠券</view>\r\n                        <u-tag class=\"u-text-right\" text=\"取消选择\" closeable type=\"error\" shape=\"circle\" mode=\"dark\" size=\"mini\" @click=\"notUseCoupon()\" v-if=\"usedCoupons.length>0\" />\r\n                    </view>\r\n                    <!--滑动列表-->\r\n                    <view class=\"coupon-scroll-box\">\r\n                        <scroll-view class=\"coupon-scroll\" scroll-x>\r\n                            <block v-for=\"(item, index) in userCoupons\" :key=\"index\">\r\n                                <view :id=\"['scroll' + (index + 1 )]\" class=\"coupon-scroll-item u-margin-top-20 flex coreshop-service-view couponBox\" @click=\"couponHandle(index)\">\r\n                                    <view class=\"flex-sub bg-page u-padding-20 u-margin-10 radius \">\r\n                                        <view class=\"coreshop-text-black u-line-1\">{{ item.couponName || ''}}</view>\r\n                                        <view class=\"coreshop-text-gray u-font-sm u-line-1\"> {{ item.expression2 }}</view>\r\n                                        <view class=\"coreshop-text-black\">\r\n                                            <text class=\"line-red u-font-20 radius\">有效期：{{ item.stime + ' 至 ' + item.etime }}</text>\r\n                                        </view>\r\n                                        <view v-if=\"!item.checked && item.disabled\">\r\n                                            <view class=\"coreshop-corner-mark\" />\r\n                                            <u-icon name=\"checkmark\" class=\"check-icon\"></u-icon>\r\n                                        </view>\r\n                                        <view v-else-if=\"item.checked && item.disabled\">\r\n                                            <view class=\"coreshop-corner-mark check\" />\r\n                                            <u-icon name=\"checkmark\" class=\"check-icon check\"></u-icon>\r\n                                        </view>\r\n                                    </view>\r\n                                </view>\r\n                            </block>\r\n                        </scroll-view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <!--支付方式-->\r\n            <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\">\r\n                <view class=\"coreshop-bg-white coreshop-card pay-view\">\r\n                    <view class=\"coreshop-list menu\">\r\n                        <!-- 商户开启积分 并且用户有积分情况下 -->\r\n                        <view class=\"coreshop-list-item\" v-if=\"isOpenPoint === 1 && userPointNums > 0\">\r\n                            <!--<view class=\"coreshop-list-item arrow\">-->\r\n                            <view class=\"content\">\r\n                                <text class=\"coreshop-text-black\">积分抵扣</text>\r\n                                <view class=\"coreshop-text-gray u-font-xs flex\">\r\n                                    <text class=\"u-line-1\">\r\n                                        可用{{ canUsePoint}}积分，可抵扣{{ pointMoney}}元，共有{{ userPointNums}}积分\r\n                                    </text>\r\n                                </view>\r\n                            </view>\r\n                            <view class=\"action\" @click=\"changePointHandle\">\r\n                                <view class=\"coreshop-text-gray fr\">\r\n                                    <switch :class=\"isUsePoint?'checked':''\" :checked=\"isUsePoint\"></switch>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"coreshop-list-item\" v-if=\"invoiceSwitch == 1\" @click=\"goInvoice()\">\r\n                            <view class=\"content\">\r\n                                <text class=\"coreshop-text-black\">发票</text>\r\n                            </view>\r\n                            <view class=\"action\">\r\n                                <text class=\"coreshop-text-gray\">{{invoice.name|| '无'}}</text>\r\n                                <u-icon name=\"arrow-right\"></u-icon>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <!--商品价格计算-->\r\n            <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\">\r\n                <view class=\"coreshop-bg-white coreshop-card coreshop-price-view\">\r\n\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">商品总额</view>\r\n                        <text class=\"coreshop-text-red coreshop-text-price u-text-right\">{{ cartData.goodsAmount }}</text>\r\n                    </view>\r\n\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">商品优惠</view>\r\n                        <text class=\"u-text-right\">- {{ cartData.goodsPromotionMoney || '0'}}</text>\r\n                    </view>\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">订单优惠</view>\r\n                        <text class=\"u-text-right\">- {{ cartData.orderPromotionMoney || '0' }}</text>\r\n                    </view>\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">优惠券抵扣</view>\r\n                        <text class=\"u-text-right\">- {{ cartData.couponPromotionMoney  || '0'}}</text>\r\n                    </view>\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">积分抵扣</view>\r\n                        <text class=\"u-text-right\">- {{ cartData.pointExchangeMoney || '0'}}</text>\r\n                    </view>\r\n                    <view class=\"coreshop-text-black item-view\">\r\n                        <view class=\"u-line-1 title\">\r\n                            <text class=\"u-margin-right-20\">运费</text>\r\n                            <text class=\"cuIcon-question icon\" />\r\n                        </view>\r\n                        <text class=\"u-text-right\">{{ cartData.costFreight || '0'}}</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <!--买家留言-->\r\n            <view class=\"u-margin-top-20 u-margin-bottom-20 coreshop-common-view-box\">\r\n                <view class=\"coreshop-bg-white\">\r\n                    <view class=\"u-margin-top-20 u-padding-20\">\r\n                        <view class=\"title\">买家留言</view>\r\n                        <!--<input v-model=\"memo\" placeholder=\"50字以内(选填)\" name=\"input\" />-->\r\n                    </view>\r\n                    <view class=\"u-padding-20\">\r\n                        <textarea class=\"memoBox\" maxlength=\"50\" @input=\"memoChange\" placeholder=\"50字以内(选填)\"></textarea>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n            <!--占位底部距离-->\r\n            <view class=\"coreshop-tabbar-height\" />\r\n            <!--底部操作-->\r\n            <view class=\"coreshop-bg-white coreshop-footer-fixed coreshop-foot-padding-bottom\">\r\n                <view class=\"u-flex u-flex-nowrap u-row-between  u-padding-20 w100\">\r\n                    <view class=\"coreshop-text-black coreshop-text-bold price-view\">\r\n                        <text class=\"u-margin-right-20\">共 {{ productNums}} 件商品</text>\r\n                        <text>合计<text class=\"coreshop-text-price coreshop-text-red u-font-lg u-margin-left-20\"> {{ cartData.amount}}</text></text>\r\n                    </view>\r\n                    <u-button  size=\"medium\"  type=\"error\" @click=\"toPay\" :disabled='submitStatus' :loading='submitStatus'>确认下单</u-button>\r\n                </view>\r\n            </view>\r\n        </div>\r\n        <!-- 登录提示 -->\r\n        <coreshop-login-modal></coreshop-login-modal>\r\n    </view>\r\n</template>\r\n<script>\r\n    import { goods, articles } from '@/common/mixins/mixinsHelper.js'\r\n    export default {\r\n        mixins: [goods, articles],\r\n        data() {\r\n            return {\r\n                typeItems: ['快递物流', '同城配送', '门店自提'],\r\n                typeCurrent: 0,\r\n                cartData: {}, // 购物车商品详情\r\n                products: [], // 货品信息\r\n                promotions: [], // 促销信息\r\n                userShip: {}, // 用户收货地址\r\n                receiptType: 1, // 订单类型 1快递物流发货订单，2同城配送，3是门店自提订单\r\n                params: {\r\n                    ids: 0, // 传递过来的购物车id\r\n                    areaId: 0, // 收货地址id\r\n                    couponCode: '', // 优惠券码列表(string)多张逗号分隔\r\n                    point: 0,// 抵扣积分额\r\n                    type: 1,//购物车类型\r\n                    objectId: 0,//关联对象类型\r\n                }, // 监听params参数信息 以重新请求接口\r\n                // 发票信息\r\n                invoice: {\r\n                    type: 1,\t// 类型 1不开发票 2个人发票 3公司发票\r\n                    name: '',\t// 发票抬头\r\n                    code: ''\t// 发票税号\r\n                },\r\n                memo: '', // 买家留言\r\n                items: [\r\n                    '选择优惠券',\r\n                    '输入券码',\r\n                ],\r\n                orderType: 1, // 商品订单类型 1\r\n                current: 0,\r\n                isUsePoint: false,\t// 是否勾选使用积分\r\n                userPointNums: 0, // 用户的总积分\r\n                canUsePoint: 0,\t// 可以使用的积分\r\n                pointMoney: 0, // 积分抵扣的金额\r\n                userCoupons: [], // 用户的可用优惠券列表\r\n                usedCoupons: {}, // 已经选择使用的优惠券\r\n                inputCouponCode: '', // 输入的优惠券码\r\n                optCoupon: '',// 当前选择使用的优惠券(暂存使用 如果接口返回不可用则剔除优惠券状态)\r\n                store: {\r\n                    id: 0,\r\n                    name: '',\r\n                    mobile: '',\r\n                    address: ''\r\n                },\r\n                storePick: {\r\n                    name: '',\r\n                    mobile: ''\r\n                },\r\n                objectId: 0,//关联对象序列\r\n                teamId: 0,//拼团订单分组序列\r\n                submitStatus: false,\r\n            }\r\n        },\r\n        components: {},\r\n        onLoad(options) {\r\n            console.log(options);\r\n            let cartIds = options.cartIds;\r\n            if (options.orderType) {\r\n                this.params.orderType = options.orderType;\r\n                this.params.type = options.orderType;\r\n            }\r\n            if (options.objectId) {\r\n                this.objectId = options.objectId;\r\n                this.params.objectId = options.objectId;\r\n            }\r\n            if (options.teamId) {\r\n                this.teamId = options.teamId;\r\n            }\r\n            this.params.ids = JSON.parse(cartIds)\r\n            if (!this.params.ids) {\r\n                _this.$refs.uToast.show({ title: '获取失败', type: 'error', back: true })\r\n            }\r\n            // 获取用户的默认收货地址信息\r\n            this.userDefaultShip()\r\n            // 获取用户的可用优惠券信息\r\n            this.getUserCounpons()\r\n            //获取默认门店信息\r\n            this.getDefaultStore();\r\n\r\n            console.log(\"当前scene值:\" + this.$store.state.scene);\r\n\r\n        },\r\n        onShow() {\r\n            let userShip = this.$store.state.userShip;\r\n            if (userShip) {\r\n                this.userShip = userShip;\r\n                this.params.areaId = userShip.areaId;\r\n            }\r\n            let userInvoice = this.$store.state.invoice;\r\n            if (userInvoice) {\r\n                this.invoice = userInvoice;\r\n            }\r\n        },\r\n        methods: {\r\n            // 切换门店\r\n            onTypeItem(index) {\r\n                if (this.typeCurrent !== index) {\r\n                    this.typeCurrent = index;\r\n                }\r\n                let receiptType = 1;\r\n                if (this.typeCurrent == 0) {\r\n                    receiptType = 1;\r\n                } else if (this.typeCurrent == 1) {\r\n                    receiptType = 2;\r\n                } else if (this.typeCurrent == 2) {\r\n                    receiptType = 3;\r\n                }\r\n                this.receiptType = receiptType;\r\n                this.getCartList();\r\n            },\r\n            // 跳转到门店列表\r\n            goStorelist() {\r\n                console.log(\"跳转到门店列表\");\r\n                this.$u.route('/pages/placeOrder/storeList/storeList')\r\n            },\r\n            // 没有收货地址时跳转\r\n            goAddress() {\r\n                console.log(\"没有收货地址时跳转\");\r\n                this.$u.route('/pages/member/address/list/list?type=order')\r\n            },\r\n            // 获取用户的默认收货地址\r\n            userDefaultShip() {\r\n                this.$u.api.userDefaultShip().then(res => {\r\n                    if (res.status && res.data && Object.keys(res.data).length) {\r\n                        this.userShip = res.data\r\n                        this.params.areaId = this.userShip.areaId\r\n\r\n                        this.storePick.name = res.data.name;\r\n                        this.storePick.mobile = res.data.mobile;\r\n\r\n                    }\r\n                })\r\n            },\r\n            // 获取购物车商品详情\r\n            getCartList() {\r\n                let _that = this;\r\n                let data = this.params\r\n                data['receiptType'] = this.receiptType\t// 区分订单类型  1快递物流,2同城配送，3上门自提订单\r\n                this.$u.api.cartList(data).then(res => {\r\n                    if (res.status) {\r\n                        let data = res.data\r\n                        // 判断是否开启积分抵扣 并且 没有勾选积分使用\r\n                        if (this.isOpenPoint === 1 && !this.isUsePoint) {\r\n                            let money = {\r\n                                orderMoney: data.amount\r\n                            }\r\n                            this.$u.api.usablePoint(money).then(res => {\r\n                                if (res.status) {\r\n                                    this.userPointNums = res.data.point\t// 用户总积分\r\n                                    this.canUsePoint = res.data.availablePoint\t// 可以使用的积分\r\n                                    this.pointMoney = res.data.pointExchangeMoney\t// 积分抵扣的总金额\r\n                                }\r\n                            })\r\n                        }\r\n                        // 所有价格转换\r\n                        data.goodsPromotionMoneyOld = data.goodsPromotionMoney;\r\n                        data.orderPromotionMoneyOld = data.orderPromotionMoney;\r\n                        // 购物车详情\r\n                        this.cartData = data\r\n                        // 商品详情\r\n                        this.products = data.list\r\n                        //判断是否有库存\r\n                        let noStock = true;\r\n                        for (let i = 0; i < data.list.length; i++) {\r\n                            if (data.list[i].isSelect) {\r\n                                noStock = false;\r\n                            }\r\n                        }\r\n                        if (noStock) {\r\n                            this.$u.toast(\"您所挑选的商品已售罄，请重新添加哦\");\r\n                        }\r\n                        // 优惠信息\r\n                        this.promotions = data.promotionList\r\n                        // 使用的优惠券信息\r\n                        this.usedCoupons = data.coupon\r\n\r\n                        this.inputCouponCode = ''\r\n                        this.optCoupon = ''\r\n                    } else {\r\n\r\n                        this.$refs.uToast.show({\r\n                            title: res.msg, type: 'error', back: false, callback: function () {\r\n                                // 优惠券不可用状态判断\r\n                                // 优惠券号码不存在 \t\t\t15009\r\n                                // 优惠券未开始\t\t\t\t15010\r\n                                // 优惠券已使用\t\t\t\t15013\r\n                                // 优惠券不符合使用规则\t\t15014\r\n                                // 优惠券不可使用多张\t\t\t15015\r\n                                // 优惠券已经过期\t\t\t15011\r\n                                let errStatus = [15009, 15010, 15011, 15013, 15014, 15015,]\r\n                                if (errStatus.indexOf(res.data) !== -1) {\r\n                                    console.log('删除使用的优惠券号码');\r\n                                    // 删除使用的优惠券号码\r\n                                    if (_that.current === 1) {\r\n                                        _that.removeCouponCode(_that.inputCouponCode, _that.current)\r\n                                    } else {\r\n                                        // 取消选择使用的状态\r\n                                        if (_that.optCoupon) {\r\n                                            _that.userCoupons.forEach(item => {\r\n                                                if (item.couponCode === _that.optCoupon) {\r\n                                                    item.checked = false\r\n                                                }\r\n                                            })\r\n                                        }\r\n                                        _that.removeCouponCode(_that.optCoupon, _that.current)\r\n                                    }\r\n                                } else {\r\n                                    console.log('未判断出内容');\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            // 获取用户可用的优惠券信息\r\n            getUserCounpons() {\r\n                let data = {\r\n                    display: 'no_used',\r\n                    ids: this.params.ids\r\n                }\r\n                this.$u.api.getCartCoupon(data).then(res => {\r\n                    if (res.status) {\r\n                        let _list = res.data.list\r\n                        let nowTime = Math.round(new Date().getTime() / 1000).toString()\r\n                        _list.forEach(item => {\r\n                            this.$set(item, 'checked', false)\r\n                            // 判断优惠券是否有效(开始时间)\r\n                            this.$set(item, 'disabled', item.startTime > nowTime ? true : false)\r\n                            this.$set(item, 'cla', item.disabled ? 'cci-l bg-c' : 'cci-l')\t// 绑定相应的class样式\r\n                        })\r\n                        this.userCoupons = _list\r\n                    }\r\n                })\r\n            },\r\n            // 点击使用/取消优惠券操作\r\n            couponHandle(index) {\r\n                // 更改使用/取消状态\r\n                this.userCoupons[index].checked = !this.userCoupons[index].checked\r\n                // 暂存当次选中使用的优惠券key\r\n                this.optCoupon = this.userCoupons[index].couponCode\r\n                let arr = []\r\n                this.userCoupons.forEach(item => {\r\n                    if (item.checked) {\r\n                        arr.push(item.couponCode)\r\n                    }\r\n                })\r\n                if (this.userCoupons[index].checked) {\r\n                    // 使用\r\n                    this.params.couponCode = arr.join()\r\n                } else {\r\n                    // 取消使用\r\n                    let paramsCodes = this.params.couponCode.split(',')\r\n                    let usedIndex = paramsCodes.indexOf(this.userCoupons[index].couponCode)\r\n                    if (usedIndex !== -1) {\r\n                        paramsCodes.splice(usedIndex, 1)\r\n                        this.params.couponCode = paramsCodes.join()\r\n                    }\r\n                }\r\n            },\r\n            // 手输的优惠券码使用\r\n            useInputCouponCode() {\r\n                if (!this.inputCouponCode) {\r\n                    this.$u.toast('请输入优惠券码')\r\n                } else {\r\n                    // 判断是否有使用的优惠券\r\n                    if (this.params.couponCode.length > 0) {\r\n                        this.params.couponCode += ',' + this.inputCouponCode\r\n                    } else {\r\n                        this.params.couponCode = this.inputCouponCode\r\n                    }\r\n                }\r\n            },\r\n            // 不使用优惠券\r\n            notUseCoupon() {\r\n                this.inputCouponCode = ''\t// 清空手输的优惠券码\r\n                this.userCoupons.forEach(item => {\r\n                    item.checked = false\r\n                }) // 取消所有选中的使用状态\r\n                this.params.couponCode = ''\t// 清空params优惠券码\r\n            },\r\n            // 移除/取消使用中的指定优惠券\r\n            removeCouponCode(code, current) {\r\n                let arr = this.params.couponCode.split(',')\r\n                arr.splice(arr.indexOf(code), 1)\r\n                current === 0 ? this.optCoupon = '' : this.inputCouponCode = ''\r\n                this.params.couponCode = arr.join()\r\n            },\r\n            // 是否使用积分\r\n            changePointHandle(e) {\r\n                //this.switchA = e.detail.value\r\n                if (this.userPointNums > 0) {\r\n                    this.isUsePoint = !this.isUsePoint;\r\n                    this.params.point = this.isUsePoint ? this.canUsePoint : 0;\r\n                }\r\n            },\r\n            // 去支付\r\n            toPay() {\r\n                this.submitStatus = true;\r\n                let receiptType = 1;\r\n                if (this.typeCurrent == 0) {\r\n                    receiptType = 1;\r\n                } else if (this.typeCurrent == 1) {\r\n                    receiptType = 2;\r\n                } else if (this.typeCurrent == 2) {\r\n                    receiptType = 3;\r\n                }\r\n                this.receiptType = receiptType;\r\n                let data = {\r\n                    cartIds: this.params.ids,\r\n                    memo: this.memo,\r\n                    couponCode: this.params.couponCode,\r\n                    point: this.params.point,\r\n                    receiptType: this.receiptType,\r\n                    objectId: this.objectId,\r\n                    teamId: this.teamId,\r\n                    orderType: this.params.orderType, //订单类型\r\n                    scene: this.$store.state.scene //场景值（用于确定小程序是否来源直播和视频号）\r\n                }\r\n\r\n                let delivery = {}\r\n                // 判断是快递配送还是门店自提\r\n                if (this.receiptType == 1 || this.receiptType == 2) {\r\n                    if (!this.userShip.id || !this.params.areaId) {\r\n                        this.$u.toast('请选择收货地址');\r\n                        this.submitStatus = false;\r\n                        return false;\r\n                    }\r\n                    // 快递配送\r\n                    delivery = {\r\n                        ushipId: this.userShip.id,\r\n                        areaId: this.params.areaId\r\n                    }\r\n                }\r\n                if (this.receiptType == 3) {\r\n                    if (!this.store.id) {\r\n                        this.$u.toast('请选择自提门店');\r\n                        this.submitStatus = false;\r\n                        return false;\r\n                    }\r\n                    if (!this.storePick.name) {\r\n                        this.$u.toast('请输入提货人姓名');\r\n                        this.submitStatus = false;\r\n                        return false;\r\n                    }\r\n                    if (!this.storePick.mobile) {\r\n                        this.$u.toast('请输入提货人电话');\r\n                        this.submitStatus = false;\r\n                        return false;\r\n                    }\r\n                    // 门店自提\r\n                    delivery = {\r\n                        storeId: this.store.id,\r\n                        ladingName: this.storePick.name,\r\n                        ladingMobile: this.storePick.mobile\r\n                    }\r\n                }\r\n\r\n                // 发票信息\r\n                data['taxType'] = this.invoice.type\r\n                data['taxName'] = this.invoice.name\r\n                data['taxCode'] = this.invoice.code\r\n                data['source'] = 3;\r\n                data = Object.assign(data, delivery)\r\n                this.$u.api.createOrder(data).then(res => {\r\n                    this.submitStatus = false;\r\n                    if (res.status) {\r\n                        // 创建订单成功 去支付\r\n                        // 判断是否为0元订单,如果是0元订单直接支付成功\r\n                        if (res.data.payStatus == '2') {\r\n                            this.$u.route({ type: 'redirectTo', url: '/pages/payment/result/result?orderId=' + res.data.orderId });\r\n                        } else {\r\n                            this.$u.route({ type: 'redirectTo', url: '/pages/payment/pay/pay?orderId=' + res.data.orderId + '&type=' + this.orderType });\r\n                        }\r\n                        this.subscription();\r\n                    } else {\r\n                        this.$u.toast(res.msg);\r\n                    }\r\n                });\r\n            },\r\n            //发起订阅\r\n            subscription() {\r\n                let _this = this;\r\n                this.$u.api.getSubscriptionTmplIds(null).then(res => {\r\n                    if (res.status) {\r\n                        console.log(res.data);\r\n                        if (res.data.length > 0) {\r\n                            console.log('进入订阅发起');\r\n                            uni.requestSubscribeMessage({\r\n                                tmplIds: res.data,\r\n                                success(ress) {\r\n                                    if (res.errMsg == \"requestSubscribeMessage:ok\") {\r\n                                        console.log(ress);\r\n                                    }\r\n                                }, fail(ress) {\r\n                                    console.log(ress);\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        this.$u.toast('消息订阅配置信息获取失败');\r\n                    }\r\n                });\r\n            },\r\n            // 跳转发票页面\r\n            goInvoice() {\r\n                this.$u.route('/pages/placeOrder/invoice/invoice')\r\n            },\r\n            // 跳转我的收货地址列表\r\n            showAddressList() {\r\n                this.$u.route('/pages/member/address/list/list?type=order')\r\n            },\r\n            // tab点击切换\r\n            onClickItem(index) {\r\n                if (this.current !== index) {\r\n                    this.current = index;\r\n                }\r\n            },\r\n            // 获取默认店铺\r\n            getDefaultStore() {\r\n                if (this.storeSwitch == 1) {\r\n                    console.log(\"获取默认店铺\");\r\n                    this.$u.api.defaultStore().then(res => {\r\n                        if (res.status) {\r\n                            if (res.data && res.data.id) {\r\n                                let store = {\r\n                                    id: res.data.id || 0,\r\n                                    name: res.data.storeName || '',\r\n                                    mobile: res.data.mobile || '',\r\n                                    address: res.data.address || ''\r\n                                }\r\n                                this.store = store;\r\n                            } else {\r\n                                this.$u.toast('商家未配置默认自提店铺！');\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            memoChange(e) {\r\n                //console.log(e);\r\n                this.memo = e.detail.value\r\n            },\r\n        },\r\n        computed: {\r\n            // 计算购物车商品数量\r\n            productNums() {\r\n                let nums = 0\r\n                for (let i in this.cartData.list) {\r\n                    if (this.cartData.list[i].isSelect) {\r\n                        nums += this.cartData.list[i].nums;\r\n                    }\r\n                }\r\n                return nums\r\n            },\r\n            // 判断商户是否开启积分抵扣 1开启 2未开启\r\n            isOpenPoint() {\r\n                return this.$store.state.config.pointSwitch\r\n            },\r\n            // 获取使用的优惠券名称\r\n            usedCouponsCompute() {\r\n                var userCouponsCount = this.userCoupons.length;\r\n\r\n                let name = userCouponsCount + '张可用'\r\n                if (Object.keys(this.usedCoupons).length) {\r\n                    let coupons = []\r\n                    for (let i in this.usedCoupons) {\r\n                        coupons.push(this.usedCoupons[i])\r\n                    }\r\n                    name = coupons.join()\r\n                }\r\n                return name\r\n            },\r\n            // 判断是否开启发票功能\r\n            invoiceSwitch() {\r\n                return this.$store.state.config.invoiceSwitch || 2;\r\n            },\r\n            // 判断店铺开关\r\n            storeSwitch() {\r\n                return this.$store.state.config.storeSwitch || 2;\r\n            },\r\n            // 根据接口返回数据判断是否使用优惠券\r\n            couponIsUsed() {\r\n                return this.cartData.coupon && this.cartData.coupon.length > 0;\r\n            },\r\n\r\n        },\r\n        watch: {\r\n            // 监听数据状态(切换收货地址, 是否使用优惠券, 是否使用积分) 重新请求订单数据\r\n            params: {\r\n                handler() {\r\n                    this.getCartList();\r\n                },\r\n                deep: true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    @import 'index.scss';\r\n</style>","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=22f76706&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=22f76706&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1723964537932\n      var cssReload = require(\"E:/Share/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}