{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?9d67","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?db46","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?98ab","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?21ca","uni-app:///pages/placeOrder/invoice/invoice.vue","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?55d8","webpack:///E:/Share/CoreShop/CoreCms.Net.Uni-App/CoreShop/pages/placeOrder/invoice/invoice.vue?4305"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","radioItems","name","value","type","model","typeName","code","errorType","isShow","chequeLisit","rules","required","message","trigger","validator","onReady","onLoad","console","invoice","methods","radioChange","notNeedInvoice","saveInvoice","setPageData","beforePage","uni","delta","getCheque","chooseCheque"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,wSAEN;AACP,KAAK;AACL;AACA,aAAa,8MAEN;AACP,KAAK;AACL;AACA,aAAa,oQAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAkoB,CAAgB,inBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC2DtpB;EACAC;IAAA;IACA;MACAC;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA;MACAC;MAAA;MACAC;QACAC;QAAA;QACAJ;QAAA;QACAK;MACA;;MACAC;MACAC;MACAC;MACAC;QACAL,WACA;UACAM;UACAC;UACAC;QACA,EACA;QACAZ,OACA;UACAU;UACAC;UACAC;QACA,EACA;QACAP,OACA;UACAQ;YACA;cACA;YACA;YACA;UACA;UACAF;QACA;MAEA;IACA;EACA;EACAG;IACA;EACA;EACAC;IACA;IACA;IACA;IACAC;IACA;MACAC;MACA;QACA;QACA;QACA;QACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAlB;QACAF;QACAK;MACA;MACA;IACA;IACA;IACAgB;MAAA;MACA;QACA;UACAL;UAEA;YACAd;YACAF;UACA;UACA;UACAF;UAEA;QAEA;UACAkB;QACA;MACA;IAGA;IACA;IACAM;MACA;MACA;MACA;QACAC;QACAC;UACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACA1B;QACA;QACA;UACA;YACA;cACA;cACA;YACA;cACA;YAAA;UAEA;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACA2B;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpNA;AAAA;AAAA;AAAA;AAA6tC,CAAgB,wnCAAG,EAAC,C;;;;;;;;;;;ACAjvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/placeOrder/invoice/invoice.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/placeOrder/invoice/invoice.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./invoice.vue?vue&type=template&id=449dc708&scoped=true&\"\nvar renderjs\nimport script from \"./invoice.vue?vue&type=script&lang=js&\"\nexport * from \"./invoice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./invoice.vue?vue&type=style&index=0&id=449dc708&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"449dc708\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/placeOrder/invoice/invoice.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invoice.vue?vue&type=template&id=449dc708&scoped=true&\"","var components\ntry {\n  components = {\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    uNoNetwork: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-no-network/u-no-network\" */ \"@/uview-ui/components/u-no-network/u-no-network.vue\"\n      )\n    },\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-form/u-form\" */ \"@/uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-form-item/u-form-item\" */ \"@/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uRadioGroup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio/u-radio\" */ \"@/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    coreshopLoginModal: function () {\n      return import(\n        /* webpackChunkName: \"components/coreshop-login-modal/coreshop-login-modal\" */ \"@/components/coreshop-login-modal/coreshop-login-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invoice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invoice.vue?vue&type=script&lang=js&\"","<template>\r\n    <view>\r\n        <u-toast ref=\"uToast\" /><u-no-network></u-no-network>\r\n        <u-navbar title=\"发票设置\"></u-navbar>\r\n\r\n        <view class=\"coreshop-bg-white\">\r\n            <u-form :model=\"model\" :rules=\"rules\" ref=\"uForm\" :errorType=\"errorType\">\r\n                <view class=\"u-padding-20\">\r\n                    <u-form-item label=\"发票类型\" label-width=\"150\" prop=\"typeName\">\r\n                        <u-radio-group v-model=\"model.typeName\">\r\n                            <u-radio @change=\"radioChange\" v-for=\"(item, index) in radioItems\" :key=\"index\" :name=\"item.name\">\r\n                                {{item.name}}\r\n                            </u-radio>\r\n                        </u-radio-group>\r\n                    </u-form-item>\r\n\r\n                    <u-form-item label=\"发票抬头\" label-width=\"150\" class=\"cheque\" prop=\"name\">\r\n                        <u-input v-model=\"model.name\" placeholder='抬头名称' @input=\"getCheque\" />\r\n                        <view class=\"cheque-content\" v-show=\"isShow\">\r\n                            <view class=\"tips-item\" v-for=\"(item,index) in chequeLisit\" :key=\"index\" @click=\"chooseCheque(item)\">\r\n                                <view class=\"tips-name\">\r\n                                    {{item.name|| ''}}\r\n                                </view>\r\n                                <view class=\"sub-div\">\r\n                                    <view class=\"tax-no\">\r\n                                        {{item.code|| ''}}\r\n                                    </view>\r\n                                    <view class=\"tips-num\">\r\n                                        <view class=\"num\">\r\n                                            {{item.frequency|| ''}}\r\n                                        </view>\r\n                                        人使用过\r\n                                    </view>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n                    </u-form-item>\r\n                    <u-form-item label=\"税务编号\" label-width=\"150\" prop=\"code\" v-show=\"type === '3'\">\r\n                        <u-input v-model=\"model.code\" placeholder='纳税人识别号' />\r\n                    </u-form-item>\r\n                    <u-form-item label=\"发票内容\" label-width=\"150\" v-show=\"type === '3'\">\r\n                        <view>明细</view>\r\n                    </u-form-item>\r\n\r\n                </view>\r\n\r\n                <view class=\"coreshop-bottomBox\">\r\n                    <button class=\"coreshop-btn coreshop-btn-square coreshop-btn-w\" @click=\"saveInvoice\">保存发票</button>\r\n                    <button class=\"coreshop-btn coreshop-btn-square coreshop-btn-b\" @click=\"notNeedInvoice\">本次不开具发票</button>\r\n                </view>\r\n\r\n            </u-form>\r\n        </view>\r\n\r\n        <!-- 登录提示 -->\r\n        <coreshop-login-modal></coreshop-login-modal>\r\n    </view>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                radioItems: [{\r\n                    name: '个人发票',\r\n                    value: '2'\r\n                },\r\n                {\r\n                    name: '企业发票',\r\n                    value: '3'\r\n                }],\r\n                type: '1', // 发票类型 1不开发票、2个人发票、3公司发票\r\n                model: {\r\n                    typeName: '', // 发票类型 2个人 3企业\r\n                    name: '', // 抬头名称\r\n                    code: '', // 税号\r\n                },\r\n                errorType: ['message'],\r\n                isShow: false,\r\n                chequeLisit: [],\r\n                rules: {\r\n                    typeName: [\r\n                        {\r\n                            required: true,\r\n                            message: '请选择发票类型或点击不开具',\r\n                            trigger: ['change', 'blur'],\r\n                        }\r\n                    ],\r\n                    name: [\r\n                        {\r\n                            required: true,\r\n                            message: '请输入发票抬头',\r\n                            trigger: ['change', 'blur'],\r\n                        }\r\n                    ],\r\n                    code: [\r\n                        {\r\n                            validator: (rule, value, callback) => {\r\n                                if (this.type === '3' && !this.model.code) {\r\n                                    return false;\r\n                                }\r\n                                return true;\r\n                            },\r\n                            message: '请输入发票税务编号'\r\n                        }\r\n                    ],\r\n                },\r\n            }\r\n        },\r\n        onReady() {\r\n            this.$refs.uForm.setRules(this.rules);\r\n        },\r\n        onLoad() {\r\n            let invoice\r\n            let pages = getCurrentPages()\r\n            let pre = pages[pages.length - 2]\r\n            console.log(pre);\r\n            if (pre != undefined) {\r\n                invoice = pre.$vm.invoice\r\n                if (invoice && invoice.hasOwnProperty('type') && invoice.type !== '1') {\r\n                    // 发票不是未使用, 展示发票信息\r\n                    this.model.name = invoice.name;\r\n                    this.model.code = invoice.code;\r\n                    this.type = invoice.type;\r\n                    if (invoice.type == 2) {\r\n                        this.model.typeName = this.radioItems[0].name;\r\n                    } else if (invoice.type == 3) {\r\n                        this.model.typeName = this.radioItems[1].name;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            // 选中某个单选框时，由radio时触发\r\n            radioChange(e) {\r\n                this.radioItems.forEach(item => {\r\n                    if (item.name === e) {\r\n                        this.type = item.value\r\n                    }\r\n                })\r\n            },\r\n            // 不需要发票信息\r\n            notNeedInvoice() {\r\n                let data = {\r\n                    type: '1',\r\n                    name: '',\r\n                    code: ''\r\n                }\r\n                this.setPageData(data)\r\n            },\r\n            // 保存发票信息\r\n            saveInvoice() {\r\n                this.$refs.uForm.validate(valid => {\r\n                    if (valid) {\r\n                        console.log('验证通过');\r\n\r\n                        let data = {\r\n                            type: this.type,\r\n                            name: this.model.name\r\n                        }\r\n                        // 不是企业类型不需要税号\r\n                        data['code'] = this.type === '3' ? this.model.code : ''\r\n\r\n                        this.setPageData(data)\r\n\r\n                    } else {\r\n                        console.log('验证失败');\r\n                    }\r\n                });\r\n\r\n\r\n            },\r\n            // 向上个页面赋值并返回\r\n            setPageData(data) {\r\n                let pages = getCurrentPages(); //当前页\r\n                let beforePage = pages[pages.length - 2]; //上个页面\r\n                if (beforePage != undefined) {\r\n                    beforePage.$vm.invoice = data;\r\n                    uni.navigateBack({\r\n                        delta: 1\r\n                    })\r\n                }\r\n            },\r\n            getCheque(event) {\r\n                let name = event;\r\n                if (name != '') {\r\n                    let data = {\r\n                        name: name\r\n                    }\r\n                    this.$u.api.getTaxInfo(data).then(res => {\r\n                        if (res.status) {\r\n                            if (res.data.length != 0) {\r\n                                this.isShow = true\r\n                                this.chequeLisit = res.data\r\n                            } else {\r\n                                // this.isShow = false\r\n                            }\r\n                        } else {\r\n                            this.$u.toast(res.msg)\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.isShow = false\r\n                }\r\n            },\r\n            chooseCheque(item) {\r\n                this.model.name = item.name;\r\n                this.model.code = item.code;\r\n                this.isShow = false;\r\n                this.type = '3';\r\n                this.model.typeName = this.radioItems[1].name;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n    @import \"invoice.scss\";\r\n</style>\r\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invoice.vue?vue&type=style&index=0&id=449dc708&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invoice.vue?vue&type=style&index=0&id=449dc708&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1723964537950\n      var cssReload = require(\"E:/Share/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}